---
title: 数字图像处理第四章--图像文件
date: 2018-01-14 23:09:47
tags: digital image processing
---

本文章是左飞的《Visual.Cpp数字图像处理开发入门与编程实践》的第四章阅读笔记。

<!-- more -->
#### 图像文件
`图像文件`：就是以数字形式存储的图像数据。

图像文件一般由文件头、调色板数据和像素数据3部分组成。

* 文件头：用于存放图像文件的各种参数，如图像的类型、宽度、高度等。
* 调色板：图像的颜色索引表，指导图像正确地呈现色彩。真色彩图像中没有调色板。
* 像素数据：图像信息的实体所在，存储了图像中各个点的像素信息。对于压缩数据来说，存在有损和无损两种形式。有损压缩通常以牺牲画面质量为代价换取了更高的压缩比。

---
#### BMP文件格式

##### 文件结构
BMP文件由3部分组成，分别是位图文件头、位图信息和像素数据，其中位图信息又由位图信息头和调色板数据组成。位图文件头、位图信息头都是固定长度的，其中，位图文件头的长度是14字节，而位图信息头的长度是40字节，它们合起来称为图像文件头。像素数据位于BMP位图文件的最后。BMP位图文件的文件结果如下图所示。
![BMP文件结构](/img/digital_image_processing/BMP_Struction.png "BMP文件结构")

##### 文件头和信息头
位图文件头是用来存储图像文件特征字符的结构体，这些特征字符标明了图像文件的大小和像素数据的存储位置等内容，如下图所示。
![BMP文件头](/img/digital_image_processing/BMP_File_Head.png "BMP文件头")

位图信息头给出了更详尽的位图特征参数，如下图所示。
![BMP信息头](/img/digital_image_processing/BMP_MESSAGE_HEAD_1.png "BMP信息头")
![BMP信息头](/img/digital_image_processing/BMP_MESSAGE_HEAD_2.png "BMP信息头")

##### 主要参数
1. 图像的宽度、高度和像素总位数

	BMP文件的位平面数恒为1.图像文件信息头中直接给出了图像的宽度、高度和每位像素等参数。

2. 调色板

	BMP文件的调色板（如果有）一定位于文件开始位置后的第54个字节处。调色板的数量取决于图像的类型。

3. 像素数据

	像素数据的位置紧跟在调色板之后，在信息头处。在操作BMP文件中的像素数组时需要注意以下几点。
	* BMP文件的像素数据每行字节数必须是四的整数倍。
	* 像素数据从底端的一行开始向上存入文件，行内仍保持从左至右的顺序。
	* 16色彩图像采用单一平面结构。
	* 真色彩图像的像素数据存放顺序是BGR，而非RGB。
***
文中有疏漏欢迎指出。
